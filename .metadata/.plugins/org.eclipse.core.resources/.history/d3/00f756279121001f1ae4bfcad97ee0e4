package com.sb_academic_evo.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

import com.sb_academic_evo.entity.StaffProfile;
import com.sb_academic_evo.entity.StudentProfile;

import lombok.NoArgsConstructor;

/*************************************************

* Author: Sundhar Raj S - 12106

* Project_Name: Stduent-mark-evaluation-system

* Class: EmailService

************************************************/

@NoArgsConstructor
@Service
public class EmailService {

	private JavaMailSender mailSender;
	
	public final String FROM_MAIL = "sundharrajs.m.s422@gmail.com";

	@Autowired
	public EmailService(JavaMailSender mailSender) {
		super();
		this.mailSender = mailSender;
	}

	public boolean sendEmail(String toMail, String subject, String body) {

		SimpleMailMessage message = new SimpleMailMessage();

		message.setFrom(FROM_MAIL);
		message.setTo(toMail);
		message.setText(body);
		message.setSubject(subject);

		try {
			mailSender.send(message);
			return true;
		} catch (Exception e) {

			return false;
		}

	}

	public boolean staffMail(StaffProfile profile) {

		try {
			// Creating a simple mail message
			SimpleMailMessage mailMessage = new SimpleMailMessage();
			// Setting up necessary details
			mailMessage.setFrom(FROM_MAIL);
			mailMessage.setTo(profile.getStaffEmail());
			mailMessage.setText("Dear " + profile.getStaffName() + ",\r\n" + "\r\n"
					+ "Our application, KCET, is a vital tool for streamlining our operations and enhancing collaboration. It is designed to managing the staff and student with the student login system through they can see their process and marks, providing a user-friendly interface and powerful features to support your role."
					+ "Our admin team activated your profile Your default password for accessing the application is "+profile.getStaffPassword()+" , but we recommend changing it for security reasons. \r\n" + "\r\n"
					+ "Our IT support team is available to assist with any technical inquiries or troubleshooting.\r\n" + "\r\n"
					+ "Best regards,\r\n" + "\r\n" + "KCET tech tool Admin\r\n" + "KCET Tool Team\r\n"
					+ "\r\n"
					+ "Note:Please be aware that this email is automatically generated by the system, and thus no response is necessary.");
			mailMessage.setSubject("Congratulations from KCET(Kamaraj college of engineering & Technology)");

			// Sending the mail
			mailSender.send(mailMessage);
			return true;
		}

		// Catch block to handle the exceptions
		catch (Exception e) {
			e.printStackTrace();
			return false;
		}

	}
	
	
	public boolean studentMail(StudentProfile profile) {

		try {
			// Creating a simple mail message
			SimpleMailMessage mailMessage = new SimpleMailMessage();

			// Setting up necessary details
			mailMessage.setFrom("sundharrajs.m.s422@gmail.com");
			mailMessage.setTo(profile.getStudentEmail());
			mailMessage.setText("Dear " + profile.getStudentName() + ",\r\n" + "\r\n"
					+ "Hello Student Our application, KCET, is a vital tool for streamlining our operations and enhancing collaboration. It is designed to manage student with the student login system through they can see their process and marks, providing a user-friendly interface and powerful features to support your role."
					+ "Our admin team activated your profile Your default password for accessing the application is "+profile.getStuPassword()+" , but we recommend changing it for security reasons. \r\n" + "\r\n"
					+ "Our IT support team is available to assist with any technical inquiries or troubleshooting.\r\n" + "\r\n"
					+ "Best regards,\r\n" + "\r\n" + "KCET tech tool Admin\r\n" + "KCET Tool Team\r\n"
					+ "\r\n"
					+ "Note:Please be aware that this email is automatically generated by the system, and thus no response is necessary.");
			mailMessage.setSubject("Congratulations from KCET(Kamaraj college of engineering & Technology)");

			// Sending the mail
			mailSender.send(mailMessage);
			return true;
		}

		// Catch block to handle the exceptions
		catch (Exception e) {
			e.printStackTrace();
			return false;
		}

	}

}
